(function(e,t,s,i){"use strict";Foundation.libs.forms={name:"forms",version:"4.0.0",settings:{disable_class:"no-custom"},init:function(t,s,i){this.scope=t||this.scope;if(typeof s==="object"){e.extend(true,this.settings,s)}if(typeof s!="string"){if(!this.settings.init){this.events()}this.assemble();return this.settings.init}else{return this[s].call(this,i)}},assemble:function(){e('form.custom input[type="radio"]').not('[data-customforms="disabled"]').each(this.append_custom_markup);e('form.custom input[type="checkbox"]').not('[data-customforms="disabled"]').each(this.append_custom_markup);e("form.custom select").not('[data-customforms="disabled"]').each(this.append_custom_select)},events:function(){var t=this;e(this.scope).on("click.fndtn.forms","form.custom span.custom.checkbox",function(s){s.preventDefault();s.stopPropagation();t.toggle_checkbox(e(this))}).on("click.fndtn.forms","form.custom span.custom.radio",function(s){s.preventDefault();s.stopPropagation();t.toggle_radio(e(this))}).on("change.fndtn.forms",'form.custom select:not([data-customforms="disabled"])',function(s){t.refresh_custom_select(e(this))}).on("click.fndtn.forms","form.custom label",function(s){var i=e("#"+t.escape(e(this).attr("for"))+':not([data-customforms="disabled"])'),n,o;if(i.length!==0){if(i.attr("type")==="checkbox"){s.preventDefault();n=e(this).find("span.custom.checkbox");if(n.length==0){n=e(this).next("span.custom.checkbox")}if(n.length==0){n=e(this).prev("span.custom.checkbox")}t.toggle_checkbox(n)}else if(i.attr("type")==="radio"){s.preventDefault();o=e(this).find("span.custom.radio");if(o.length==0){o=e(this).next("span.custom.radio")}if(o.length==0){o=e(this).prev("span.custom.radio")}t.toggle_radio(o)}}}).on("click.fndtn.forms","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(s){var i=e(this),n=i.closest("div.custom.dropdown"),o=n.prev();if(!n.hasClass("open"))e(t.scope).trigger("click");s.preventDefault();if(false===o.is(":disabled")){n.toggleClass("open");if(n.hasClass("open")){e(t.scope).on("click.fndtn.forms.customdropdown",function(){n.removeClass("open");e(t.scope).off(".fndtn.forms.customdropdown")})}else{e(t.scope).on(".fndtn.forms.customdropdown")}return false}}).on("click.fndtn.forms touchend.fndtn.forms","form.custom div.custom.dropdown li",function(t){var s=e(this),i=s.closest("div.custom.dropdown"),n=i.prev(),o=0;t.preventDefault();t.stopPropagation();if(!e(this).hasClass("disabled")){e("div.dropdown").not(i).removeClass("open");var a=s.closest("ul").find("li.selected");a.removeClass("selected");s.addClass("selected");i.removeClass("open").find("a.current").html(s.html());s.closest("ul").find("li").each(function(e){if(s[0]==this){o=e}});n[0].selectedIndex=o;n.data("prevalue",a.html());n.trigger("change")}});this.settings.init=true},append_custom_markup:function(t,s){var i=e(s).hide(),n=i.attr("type"),o=i.next("span.custom."+n);if(o.length===0){o=e('<span class="custom '+n+'"></span>').insertAfter(i)}o.toggleClass("checked",i.is(":checked"));o.toggleClass("disabled",i.is(":disabled"))},append_custom_select:function(t,s){var i=Foundation.libs.forms,n=e(s),o=n.next("div.custom.dropdown"),a=o.find("ul"),d=o.find(".current"),c=o.find(".selector"),l=n.find("option"),r=l.filter(":selected"),f=0,h="",u,m=false;if(n.hasClass(i.settings.disable_class))return;if(o.length===0){var p=n.hasClass("small")?"small":n.hasClass("medium")?"medium":n.hasClass("large")?"large":n.hasClass("expand")?"expand":"";o=e('<div class="'+["custom","dropdown",p].join(" ")+'"><a href="#" class="selector"></a><ul /></div>');c=o.find(".selector");a=o.find("ul");h=l.map(function(){return"<li>"+e(this).html()+"</li>"}).get().join("");a.append(h);m=o.prepend('<a href="#" class="current">'+r.html()+"</a>").find(".current");n.after(o).hide()}else{h=l.map(function(){return"<li>"+e(this).html()+"</li>"}).get().join("");a.html("").append(h)}o.toggleClass("disabled",n.is(":disabled"));u=a.find("li");l.each(function(t){if(this.selected){u.eq(t).addClass("selected");if(m){m.html(e(this).html())}}if(e(this).is(":disabled")){u.eq(t).addClass("disabled")}});if(!o.is(".small, .medium, .large, .expand")){o.addClass("open");var i=Foundation.libs.forms;i.hidden_fix.adjust(a);f=i.outerWidth(u)>f?i.outerWidth(u):f;Foundation.libs.forms.hidden_fix.reset();o.removeClass("open")}},refresh_custom_select:function(t){var s=this;var i=0,n=t.next(),o=t.find("option");n.find("ul").html("");o.each(function(){var t=e("<li>"+e(this).html()+"</li>");n.find("ul").append(t)});o.each(function(t){if(this.selected){n.find("li").eq(t).addClass("selected");n.find(".current").html(e(this).html())}if(e(this).is(":disabled")){n.find("li").eq(t).addClass("disabled")}});n.removeAttr("style").find("ul").removeAttr("style");n.find("li").each(function(){n.addClass("open");if(s.outerWidth(e(this))>i){i=s.outerWidth(e(this))}n.removeClass("open")})},toggle_checkbox:function(e){var t=e.prev(),s=t[0];if(false===t.is(":disabled")){s.checked=s.checked?false:true;e.toggleClass("checked");t.trigger("change")}},toggle_radio:function(e){var t=e.prev(),s=t.closest("form.custom"),i=t[0];if(false===t.is(":disabled")){s.find('input[type="radio"][name="'+this.escape(t.attr("name"))+'"]').next().not(e).removeClass("checked");if(!e.hasClass("checked")){e.toggleClass("checked")}i.checked=e.hasClass("checked");t.trigger("change")}},escape:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},hidden_fix:{tmp:[],hidden:null,adjust:function(t){var s=this;s.hidden=t.parents().andSelf().filter(":hidden");s.hidden.each(function(){var t=e(this);s.tmp.push(t.attr("style"));t.css({visibility:"hidden",display:"block"})})},reset:function(){var t=this;t.hidden.each(function(s){var n=e(this),o=t.tmp[s];if(o===i)n.removeAttr("style");else n.attr("style",o)});t.tmp=[];t.hidden=null}},off:function(){e(this.scope).off(".fndtn.forms")}}})(Foundation.zj,this,this.document);