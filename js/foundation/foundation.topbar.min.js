(function(t,i,s,e){"use strict";Foundation.libs.topbar={name:"topbar",version:"4.0.2",settings:{index:0,stickyClass:"sticky",init:false},init:function(s,e,n){var a=this;this.scope=s||this.scope;if(typeof e==="object"){t.extend(true,this.settings,e)}if(typeof e!="string"){t("nav.top-bar").each(function(){a.settings.$w=t(i);a.settings.$topbar=t(this);a.settings.$section=a.settings.$topbar.find("section");a.settings.$titlebar=a.settings.$topbar.children("ul").first();a.settings.$topbar.data("index",0);var s=t("<div class='top-bar-js-breakpoint'/>").insertAfter(a.settings.$topbar);a.settings.breakPoint=s.width();s.remove();a.assemble();if(!a.settings.$topbar.data("height"))a.largestUL();if(a.settings.$topbar.parent().hasClass("fixed")){t("body").css("padding-top",this.outerHeight(this.settings.$topbar))}});if(!a.settings.init){this.events()}return this.settings.init}else{return this[e].call(this,n)}},events:function(){var s=this;t(this.scope).on("click.fndtn.topbar",".top-bar .toggle-topbar",function(i){var e=t(this).closest(".top-bar"),n=e.find("section, .section"),a=e.children("ul").first();i.preventDefault();if(s.breakpoint()){e.toggleClass("expanded").css("min-height","")}if(!e.hasClass("expanded")){n.css({left:"0%"});n.find(">.name").css({left:"100%"});n.find("li.moved").removeClass("moved");e.data("index",0)}}).on("click.fndtn.topbar",".top-bar .has-dropdown>a",function(i){var e=t(this).closest(".top-bar"),n=e.find("section, .section"),a=e.children("ul").first();if(Modernizr.touch||s.breakpoint()){i.preventDefault()}if(s.breakpoint()){var o=t(this),r=o.closest("li");e.data("index",e.data("index")+1);r.addClass("moved");n.css({left:-(100*e.data("index"))+"%"});n.find(">.name").css({left:100*e.data("index")+"%"});o.siblings("ul").height(e.data("height")+s.outerHeight(a,true));e.css("min-height",e.data("height")+s.outerHeight(a,true)*2)}});t(i).on("resize.fndtn.topbar",function(){if(!this.breakpoint()){t(".top-bar").css("min-height","")}}.bind(this));t(this.scope).on("click.fndtn",".top-bar .has-dropdown .back",function(i){i.preventDefault();var s=t(this),e=s.closest(".top-bar"),n=e.find("section, .section"),a=s.closest("li.moved"),o=a.parent();e.data("index",e.data("index")-1);n.css({left:-(100*e.data("index"))+"%"});n.find(">.name").css({left:100*e.data("index")+"%"});if(e.data("index")===0){e.css("min-height",0)}setTimeout(function(){a.removeClass("moved")},300)})},breakpoint:function(){return t(i).width()<=this.settings.breakPoint||t("html").hasClass("lt-ie9")},assemble:function(){this.settings.$section.detach();this.settings.$section.find(".has-dropdown>a").each(function(){var i=t(this),s=i.siblings(".dropdown"),e=t('<li class="title back js-generated"><h5><a href="#">&laquo; Back</a></h5></li>');s.prepend(e)});this.settings.$section.appendTo(this.settings.$topbar);this.sticky()},largestUL:function(){var i=this.settings.$topbar.find("section ul ul"),s=i.first(),e=0,n=this;i.each(function(){if(t(this).children("li").length>s.children("li").length){s=t(this)}});s.children("li").each(function(){e+=n.outerHeight(t(this),true)});this.settings.$topbar.data("height",e)},sticky:function(){var s="."+this.settings.stickyClass;if(t(s).length>0){var e=t(s).length?t(s).offset().top:0,n=t(i);var a=this.outerHeight(t("nav.top-bar"))+20;n.scroll(function(){if(n.scrollTop()>=e){t(s).addClass("fixed");t("body").css("padding-top",a)}else if(n.scrollTop()<e){t(s).removeClass("fixed");t("body").css("padding-top","0")}})}},off:function(){t(this.scope).off(".fndtn.topbar");t(i).off(".fndtn.topbar")}}})(Foundation.zj,this,this.document);